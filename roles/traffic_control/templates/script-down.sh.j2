#!/bin/bash

# Auto-generated script to apply network limits using tc
# Generated by Ansible on {{ ansible_date_time.date }} at {{ ansible_date_time.time }}
set -xe

{% for item in traffic_control_rules %}
#
# CONFIG FOR: {{ item.interface }}
#
{% set ifb_interface = traffic_control_ifb_interface_prefix + item.interface %}
tc qdisc del dev {{ item.interface }} root
tc qdisc del dev {{ item.interface }} ingress
tc qdisc del dev {{ ifb_interface }} root
ip link set {{ ifb_interface }} down
ip link delete {{ ifb_interface }} type ifb

{% endfor %}
